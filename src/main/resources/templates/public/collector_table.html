<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Приемная - список</title>
<link rel="stylesheet" href="/public_resources/fontawesome/css/all.min.css">
<link rel="stylesheet" href="/assets/collector.css">
<script src="/public_resources/exceljs.min.js"></script>
<link rel="icon" href="/icon.png">
</head>
<body>
	<div class="container">
		<div class="nav-bar">
			<div class="nav-brand">
				<i class="fa-solid fa-id-card"></i> OtryadAdmin | Приемная
			</div>
			<div>
				<a class="btn btn-secondary" href="/head/collector"> <i class="fas fa-plus"></i> Добавить
				</a> <a class="btn btn-secondary" href="/head/collector/data"> <i class="fas fa-list"></i> Список
				</a>
				<button class="btn btn-secondary" onclick="exportTable()">
					<i class="fa-solid fa-file-export"></i> Экспорт
				</button>
				<a class="btn btn-secondary" href="/lk"> <i class="fa-solid fa-house"></i>Выйти
				</a>
			</div>
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
		</div>
		<div id="view-table" class="view-section active">
			<div class="card">
				<h2>База данных</h2>
				<div class="table-container">
					<table id="studentsTable">
						<thead>
							<tr>
								<th>Фото</th>
								<th>ФИО</th>
								<th>Школа / Класс</th>
								<th>Телефон</th>
								<th>Действия</th>
							</tr>
						</thead>
						<tbody>
							<tr th:if="${candidates.isEmpty()}"><td colspan="5" style="text-align: center; padding: 20px;">Нет
									записей</td></tr>
							<tr th:each="candidate : ${candidates}" th:name="${candidate.id}">
								<td><img th:src="${candidate.photo} == null ? '/icon.png' : ${candidate.photo}" class="avatar-small" alt="photo"></td>
								<td th:text="${candidate.surname + ' ' + candidate.firstname + ' ' + candidate.patronymic}"></td>
								<td th:text="${candidate.school + ', ' + candidate.grade}"></td>
								<td th:text="${candidate.phone}"></td>
								<td>
									<button class="btn btn-primary" style="padding: 5px 10px; font-size: 12px;"
										th:onclick="|viewProfile(${candidate.id})|">
										<i class="fas fa-eye"></i>
									</button>
									<button class="btn btn-danger" style="padding: 5px 10px; font-size: 12px;"
										th:onclick="|deleteUser(${candidate.id})|">
										<i class="fas fa-trash"></i>
									</button>
							</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
		<div id="view-profile" class="view-section">
			<div class="card">
				<button class="btn btn-secondary" onclick="switchView('table')" style="margin-bottom: 20px;">
					<i class="fas fa-arrow-left"></i> Назад
				</button>
				<div id="profileContent"></div>
			</div>
		</div>
	</div>
	<script src="/onepage_scripts/collector.js"></script>
</body>
</html>